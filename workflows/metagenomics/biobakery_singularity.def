Bootstrap: yum
OSVersion: 7
MirrorURL: http://mirror.centos.org/centos-7/7.7.1908/os/x86_64/
Include: yum

%post
yum install -y epel-release
yum install -y R
yum install -y \
    make \
    gcc \
    gcc-c++ \
    libcurl-devel \
    libxml2-devel \
    java-1.7.0-openjdk-devel \
    openssl-devel \
    texlive-* \
    pandoc

yum install -y \
    libXcomposite \
    libXcursor \
    libXi \
    libXtst \
    libXrandr \
    alsa-lib \
    mesa-libEGL \
    libXdamage \
    mesa-libGL \
    libXScrnSaver

yum install -y \
    centos-release-scl \
    rh-python37 \
    wget

wget https://repo.anaconda.com/archive/Anaconda3-2019.10-Linux-x86_64.sh
bash Anaconda3-2019.10-Linux-x86_64.sh -b -p /opt/anaconda
eval "$(/opt/anaconda/bin/conda shell.ROOT hook)"
conda init

conda config --add channels defaults
conda config --add channels bioconda
conda config --add channels conda-forge
conda config --add channels biobakery

conda install -c biobakery humann2
